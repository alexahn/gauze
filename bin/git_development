#!/bin/zsh

cp ./src/kernel/src/migrations/ezuag.js ./src/database/migrations/00000000000012_ezuag.js
cp ./src/kernel/src/migrations/ytitne.js ./src/database/migrations/00000000000013_ytitne.js
cp ./src/kernel/src/migrations/entity.js ./src/database/migrations/00000000000014_entity.js
cp ./src/kernel/src/migrations/gauze.js ./src/database/migrations/00000000000015_gauze.js

npx gauze create gauze ./src ./gauze/gauze.js

npx gauze create entity ./src ./gauze/entity.js

npx gauze create entity ./src ./gauze/ytitne.js

npx gauze create gauze ./src ./gauze/ezuag.js

cp -r ./env/development/src/* ./src/
cp -r ./env/development/test/* ./test/

# class name fix for pascal case
find ./src/database/models/ezuag.js -type f -name "*.js" -exec sed -i '' "s/EzuagDatabaseModel/EzuagEzuagDatabaseModel/g" {} +
find ./src/database/models/ytitne.js -type f -name "*.js" -exec sed -i '' "s/YtitneDatabaseModel/YtitneYtitneDatabaseModel/g" {} +

find ./src/database/controllers/ezuag.js -type f -name "*.js" -exec sed -i '' "s/EzuagDatabaseController/EzuagEzuagDatabaseController/g" {} +
find ./src/database/controllers/ytitne.js -type f -name "*.js" -exec sed -i '' "s/YtitneDatabaseController/YtitneYtitneDatabaseController/g" {} +

find ./src/system/models/ezuag.js -type f -name "*.js" -exec sed -i '' "s/EzuagSystemModel/EzuagEzuagSystemModel/g" {} +
find ./src/system/models/ytitne.js -type f -name "*.js" -exec sed -i '' "s/YtitneSystemModel/YtitneYtitneSystemModel/g" {} +

find ./src/system/controllers/ezuag.js -type f -name "*.js" -exec sed -i '' "s/EzuagSystemController/EzuagEzuagSystemController/g" {} +
find ./src/system/controllers/ytitne.js -type f -name "*.js" -exec sed -i '' "s/YtitneSystemController/YtitneYtitneSystemController/g" {} +


